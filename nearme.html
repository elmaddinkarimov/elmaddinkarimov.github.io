<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link href="https://developers.google.com/maps/documentation/javascript/examples/default.css"
        rel="stylesheet">
    <title>Find food near you</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places&key=AIzaSyATFxNPeN_-CtSjccuyrMXqNIflF6Qlihg"></script>

	<!-- Add jQuery library -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
			
    <script>

  var map 
  var results	
  var html = "";
  var service;
  var ref;
 
 
function initialize() {

	map = new google.maps.Map(document.getElementById('map-canvas'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  
  var defaultBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(-33.8902, 151.1759),
      new google.maps.LatLng(-33.8474, 151.2631));
  map.fitBounds(defaultBounds);

  var input = /** @type {HTMLInputElement} */(document.getElementById('target'));
  var searchBox = new google.maps.places.SearchBox(input);
  var markers = [];
  
  google.maps.event.addListener(searchBox, 'places_changed', function() {
    
	var request = {query: 'food near ' + (document.getElementById('target')).value };
	
	service = new google.maps.places.PlacesService(map);
	service.textSearch(request, callback);
   
  });  
}

function callback(results, status) {
	document.getElementById("test").innerHTML = "";
	html = "";
		
var bounds = new google.maps.LatLngBounds();
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var marker = new google.maps.Marker({
      position: results[i].geometry.location,
      map: map,
      title: results[i].name
  });
  
  	html += results[i].name + "<br>" + results[i].formatted_address + "<br>" + results[i].formatted_phone_number + "<br>" + results[i].website + "<br><br>";
	  	   	
	bounds.extend(results[i].geometry.location)  ;
		
    }
		document.getElementById("test").innerHTML = html;
		map.fitBounds(bounds);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    <style>
      #target {
        width: 345px;
      }
    </style>
  </head>
  <body>
    <div id="panel">
      <input id="target" type="text" placeholder="Enter an address, postal/zip code, etc.">		
    </div>
    <div id="test">
	</div>
	<div id="map-canvas" style="display:none">
	</div>
  </body>
</html>

